{"filter":false,"title":"sessions_controller.rb","tooltip":"/illust_cmmunity/app/controllers/users/sessions_controller.rb","undoManager":{"mark":22,"position":22,"stack":[[{"start":{"row":0,"column":0},"end":{"row":6,"column":3},"action":"insert","lines":["class Users::SessionsController < Devise::SessionsController","  def guest_sign_in","    user = User.guest","    sign_in user","    redirect_to user_path(user), notice: 'guestuserでログインしました。'","  end","end"],"id":1}],[{"start":{"row":4,"column":50},"end":{"row":4,"column":51},"action":"remove","lines":["r"],"id":2},{"start":{"row":4,"column":49},"end":{"row":4,"column":50},"action":"remove","lines":["e"]},{"start":{"row":4,"column":48},"end":{"row":4,"column":49},"action":"remove","lines":["s"]},{"start":{"row":4,"column":47},"end":{"row":4,"column":48},"action":"remove","lines":["u"]},{"start":{"row":4,"column":46},"end":{"row":4,"column":47},"action":"remove","lines":["t"]},{"start":{"row":4,"column":45},"end":{"row":4,"column":46},"action":"remove","lines":["s"]},{"start":{"row":4,"column":44},"end":{"row":4,"column":45},"action":"remove","lines":["e"]},{"start":{"row":4,"column":43},"end":{"row":4,"column":44},"action":"remove","lines":["u"]},{"start":{"row":4,"column":42},"end":{"row":4,"column":43},"action":"remove","lines":["g"]}],[{"start":{"row":4,"column":42},"end":{"row":4,"column":45},"action":"insert","lines":["ゲスト"],"id":3}],[{"start":{"row":4,"column":56},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":8},{"start":{"row":5,"column":0},"end":{"row":5,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":5,"column":4},"end":{"row":26,"column":5},"action":"insert","lines":[" def customer_state","    # 入力されたemailからアカウントを1件取得","    @customer = Customer.find_by(email: params[:customer][:email])","    # アカウントを取得できなかった場合、このメソッドを終了する","    return unless @customer","    # 取得したアカウントのパスワードと入力されたパスワードが一致しているかを判別","    if @customer.valid_password?(params[:customer][:password])","      # パスワードが一致した場合の処理内容を記述する","      if @customer.is_active","        # アカウントが有効な場合の処理内容を記述する","        return","      else","        # アカウントが無効（退会済み）の場合の処理内容を記述する","        flash[:error] = \"退会済みのアカウントです。\"","        redirect_to  new_customer_registration_path","      end","    else","      # パスワードが一致しなかった場合の処理内容を記述する","      flash[:error] = \"退会済みのアカウントです。\"","      redirect_to  new_customer_registration_path","    end","  end"],"id":9}],[{"start":{"row":26,"column":2},"end":{"row":26,"column":3},"action":"insert","lines":["　"],"id":10},{"start":{"row":26,"column":3},"end":{"row":27,"column":0},"action":"insert","lines":["",""]},{"start":{"row":27,"column":0},"end":{"row":27,"column":3},"action":"insert","lines":["  　"]},{"start":{"row":27,"column":3},"end":{"row":28,"column":0},"action":"insert","lines":["",""]},{"start":{"row":28,"column":0},"end":{"row":28,"column":3},"action":"insert","lines":["  　"]}],[{"start":{"row":28,"column":2},"end":{"row":28,"column":3},"action":"remove","lines":["　"],"id":11},{"start":{"row":28,"column":0},"end":{"row":28,"column":2},"action":"remove","lines":["  "]},{"start":{"row":27,"column":3},"end":{"row":28,"column":0},"action":"remove","lines":["",""]},{"start":{"row":27,"column":2},"end":{"row":27,"column":3},"action":"remove","lines":["　"]},{"start":{"row":27,"column":0},"end":{"row":27,"column":2},"action":"remove","lines":["  "]},{"start":{"row":26,"column":3},"end":{"row":27,"column":0},"action":"remove","lines":["",""]},{"start":{"row":26,"column":2},"end":{"row":26,"column":3},"action":"remove","lines":["　"]}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"remove","lines":["  "],"id":12}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":1},"action":"insert","lines":["　"],"id":13}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"insert","lines":["　"],"id":14}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":["　"],"id":15}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"insert","lines":[" "],"id":16}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":1},"action":"remove","lines":["　"],"id":17}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":1},"action":"insert","lines":[" "],"id":18},{"start":{"row":26,"column":1},"end":{"row":26,"column":2},"action":"insert","lines":[" "]}],[{"start":{"row":26,"column":2},"end":{"row":26,"column":3},"action":"insert","lines":[" "],"id":19},{"start":{"row":26,"column":3},"end":{"row":26,"column":4},"action":"insert","lines":[" "]},{"start":{"row":26,"column":4},"end":{"row":26,"column":5},"action":"insert","lines":[" "]}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":[" "],"id":20}],[{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"remove","lines":["r"],"id":21},{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"remove","lines":["e"]},{"start":{"row":24,"column":28},"end":{"row":24,"column":29},"action":"remove","lines":["m"]},{"start":{"row":24,"column":27},"end":{"row":24,"column":28},"action":"remove","lines":["o"]},{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"remove","lines":["t"]},{"start":{"row":24,"column":25},"end":{"row":24,"column":26},"action":"remove","lines":["s"]},{"start":{"row":24,"column":24},"end":{"row":24,"column":25},"action":"remove","lines":["u"]},{"start":{"row":24,"column":23},"end":{"row":24,"column":24},"action":"remove","lines":["c"]}],[{"start":{"row":24,"column":23},"end":{"row":24,"column":24},"action":"insert","lines":["u"],"id":22},{"start":{"row":24,"column":24},"end":{"row":24,"column":25},"action":"insert","lines":["s"]},{"start":{"row":24,"column":25},"end":{"row":24,"column":26},"action":"insert","lines":["e"]},{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"insert","lines":["r"]}],[{"start":{"row":19,"column":32},"end":{"row":19,"column":33},"action":"remove","lines":["r"],"id":23},{"start":{"row":19,"column":31},"end":{"row":19,"column":32},"action":"remove","lines":["e"]},{"start":{"row":19,"column":30},"end":{"row":19,"column":31},"action":"remove","lines":["m"]},{"start":{"row":19,"column":29},"end":{"row":19,"column":30},"action":"remove","lines":["o"]},{"start":{"row":19,"column":28},"end":{"row":19,"column":29},"action":"remove","lines":["t"]},{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"remove","lines":["s"]},{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"remove","lines":["u"]},{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"remove","lines":["c"]}],[{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"insert","lines":["u"],"id":24},{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"insert","lines":["s"]},{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":["e"]},{"start":{"row":19,"column":28},"end":{"row":19,"column":29},"action":"insert","lines":["r"]}],[{"start":{"row":5,"column":9},"end":{"row":5,"column":17},"action":"remove","lines":["customer"],"id":25},{"start":{"row":5,"column":9},"end":{"row":5,"column":13},"action":"insert","lines":["user"]},{"start":{"row":7,"column":5},"end":{"row":7,"column":13},"action":"remove","lines":["customer"]},{"start":{"row":7,"column":5},"end":{"row":7,"column":9},"action":"insert","lines":["user"]},{"start":{"row":7,"column":12},"end":{"row":7,"column":20},"action":"remove","lines":["Customer"]},{"start":{"row":7,"column":12},"end":{"row":7,"column":16},"action":"insert","lines":["user"]},{"start":{"row":7,"column":40},"end":{"row":7,"column":48},"action":"remove","lines":["customer"]},{"start":{"row":7,"column":40},"end":{"row":7,"column":44},"action":"insert","lines":["user"]},{"start":{"row":9,"column":19},"end":{"row":9,"column":27},"action":"remove","lines":["customer"]},{"start":{"row":9,"column":19},"end":{"row":9,"column":23},"action":"insert","lines":["user"]},{"start":{"row":11,"column":8},"end":{"row":11,"column":16},"action":"remove","lines":["customer"]},{"start":{"row":11,"column":8},"end":{"row":11,"column":12},"action":"insert","lines":["user"]},{"start":{"row":11,"column":37},"end":{"row":11,"column":45},"action":"remove","lines":["customer"]},{"start":{"row":11,"column":37},"end":{"row":11,"column":41},"action":"insert","lines":["user"]},{"start":{"row":13,"column":10},"end":{"row":13,"column":18},"action":"remove","lines":["customer"]},{"start":{"row":13,"column":10},"end":{"row":13,"column":14},"action":"insert","lines":["user"]}],[{"start":{"row":26,"column":8},"end":{"row":27,"column":5},"action":"remove","lines":["","  end"],"id":26}],[{"start":{"row":4,"column":56},"end":{"row":5,"column":5},"action":"insert","lines":["","  end"],"id":27}]]},"ace":{"folds":[],"scrolltop":77.719482421875,"scrollleft":0,"selection":{"start":{"row":5,"column":5},"end":{"row":5,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":4,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1687224025993,"hash":"7466aed2a246e065284cb4af4fd4f6cf223c67d4"}